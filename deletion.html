<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Delete Account - App</title>
  <style>
    body { font-family: Arial; max-width: 700px; margin: auto; padding: 2rem; }
    h1 { color: #ea5a28; }
    label, input { display: block; margin-bottom: 1rem; width: 100%; max-width: 400px; }
    .hidden { display: none; }
    #confirmation { margin-top: 2rem; padding: 1rem; background-color: #ffe9e9; border: 1px solid red; }
    #confirmation button { background: red; color: white; padding: 0.5rem 1rem; border: none; cursor: pointer; }
    .legal { font-size: 0.9rem; color: #555; margin-top: 2rem; }
  </style>
</head>
<body>
  <h1 id="title">Request Account Deletion</h1>
  <p id="description">Loading...</p>

  <h2>Login to Verify Identity</h2>
  <form id="verifyForm">
    <label>Username or Email:
      <input type="text" id="username" required />
    </label>
    <label>Password:
      <input type="password" id="password" required />
    </label>
    <button type="submit">Verify Identity</button>
  </form>

  <div id="confirmation" class="hidden">
    <h2>‚ö†Ô∏è Confirm Account Deletion</h2>
    <p>This action is irreversible. All associated personal data will be permanently deleted in accordance with our privacy policy.</p>
    <p><strong>By confirming, you waive any right to recovery of deleted data or services.</strong></p>
    <button onclick="finalizeDeletion()">Yes, Delete My Account</button>
  </div>

  <h2>Data Deleted</h2>
  <ul>
    <li>Personal identifiers (email, phone number, username)</li>
    <li>App usage and login history</li>
    <li>Account and preferences data</li>
  </ul>

  <h2>Data Retained</h2>
  <p>We retain minimal logs and non-identifiable analytics data for security, auditing, or compliance reasons, as permitted by law, for no longer than 30 days.</p>

  <h2>Need Help?</h2>
  <p>Contact us at <strong id="contact">support@example.com</strong></p>

  <p class="legal">
    By using this form, you acknowledge and agree that this process is final and legally binding. You understand that all data will be deleted in accordance with data protection laws including the General Data Protection Regulation (GDPR) and the California Consumer Privacy Act (CCPA). We are not liable for any lost access, data, or services once deletion is confirmed.
  </p>

  <script>
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    const appName = getQueryParam('app') || 'Our App';
    const contactEmail = `${appName.toLowerCase().replace(/\s/g, '')}@support.com`;

    document.title = `Delete Account - ${appName}`;
    document.getElementById('title').innerText = `Request Account Deletion for ${appName}`;
    document.getElementById('description').innerText = `This page explains how to request deletion of your account and personal data associated with the ${appName} mobile app.`;
    document.getElementById('contact').innerText = contactEmail;

    const form = document.getElementById('verifyForm');
    const confirmationBox = document.getElementById('confirmation');

    form.addEventListener('submit', async function (e) {
      e.preventDefault();
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;

      // üîß Replace this URL with your actual API endpoint
      const response = await fetch('https://your-backend.com/api/verify-user', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password })
      });

      if (response.status === 200) {
        confirmationBox.classList.remove('hidden');
        form.classList.add('hidden');
      } else {
        alert("Invalid credentials. Please try again.");
      }
    });

    function finalizeDeletion() {
      alert("Your account deletion request has been submitted. If verified, you will receive a confirmation shortly.");
      // Optional: call your actual backend deletion endpoint here.
      // fetch('https://your-backend.com/api/delete-account', { ... })
    }
  </script>
</body>
</html>
